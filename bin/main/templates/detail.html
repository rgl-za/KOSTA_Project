<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org"
	xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
	layout:decorate="layouts/basic">
<th:block layout:fragment="content">
	<div class="container-fluid">
		<!-- Page Heading -->
		<div class="d-sm-flex align-items-center justify-content-between mb-4">
			<h1 class="h3 mb-0 text-gray-800">거래 상세 페이지</h1>
		</div>
		<div
			class="card-header py-3 d-flex flex-row align-items-center justify-content-between">
			<h6 class="m-0 font-weight-bold text-primary">Revenue Sources</h6>

		</div>
		<div class="row">

			<!-- 이미지와 링크 -->
			<div class="col-xl-4 col-lg-5">
				<div class="card-detail-top shadow mb-4">
					<!-- Card Body -->
					<div class="card-body">

						<div class="represent_img">
							<img class="img-item" src="img/undraw_profile.svg">
						</div>
						<div class="margin-bottom">
							<h7 class="m-0 font-weight-bold text-primary">링크주소:
							http://~~</h7>

						</div>
					</div>
				</div>
			</div>
			<!-- 거래 정보 -->
			<div class="col-xl-8 col-lg-7">
				<div class="card-detail-top shadow mb-4">
					<!-- Card Body -->
					<div class="card-body-nonauto">
						<h7>거래상세정보</h7>
						<div class="horizon">
							<div class="detail-top_info">
								<h7 class="m-0 font-weight-bold text-primary">원가 : </h7>
								8000원 &nbsp;<br>
								<h7 class="m-0 font-weight-bold text-primary">물품 개수 : </h7>
								15개입 &ensp;<br>
								<p>
									<h7 class="m-0 font-weight-bold text-primary">최소인원 : </h7>
									2명 &emsp;
									<h7 class="m-0 font-weight-bold text-primary">최대인원 : </h7>
									5명
								</p>
								<p>
									<h7 class="m-0 font-weight-bold text-primary"> 최대 구매가 : </h7>
									--원
									<h7 class="m-0 font-weight-bold text-primary"> 최소 구매가 : </h7>
									--원<br>

									<h7 class="m-0 font-weight-bold text-primary"> 현재 인원수 : </h7>
									1명
									<h7 class="m-0 font-weight-bold text-primary"> 현재 구매가 : </h7>
									---원<br>
							</div>
							<div class="detail-top_timer">
								<h8>남은 시간</h8>
								<p>
								 <!-- <img src="img/clock.png" style="width:10vw; min-width: 30px;"> -->
								 <span id="timer" style="font-size:90px;"></span>
								</p>
							</div>


						</div>
						<div class="vertical">
							<!-- 참여자 ready 영역 -->
							<div class="detail-ready">
								<div class="user-ready-img">
									<img class="ready-img rounded-circle"
										src="img/undraw_profile.svg">
									<a href="#" class="btn btn-primary btn-icon-split"> <span
									class="icon text-white-50"> <i class="fas fa-flag"></i>
								</span> <span class="text">준비</span>
								</a>
								</div>
								<div class="user-ready-img">
									<img class="ready-img rounded-circle"
										src="img/undraw_profile.svg">
									<a href="#" class="btn btn-primary btn-icon-split"> <span
									class="icon text-white-50"> <i class="fas fa-flag"></i>
								</span> <span class="text">준비</span>
								</a>
								</div>
								<div class="user-ready-img">
									<img class="ready-img rounded-circle"
										src="img/undraw_profile.svg">
									<a href="#" class="btn btn-primary btn-icon-split"> <span
									class="icon text-white-50"> <i class="fas fa-flag"></i>
								</span> <span class="text">준비</span>
								</a>
								</div>
								<div class="user-ready-img">
									<img class="ready-img rounded-circle"
										src="img/undraw_profile.svg">
									<a href="#" class="btn btn-primary btn-icon-split"> <span
									class="icon text-white-50"> <i class="fas fa-flag"></i>
								</span> <span class="text">준비</span>
								</a>
								</div>
								<div class="user-ready-img">
									<img class="ready-img rounded-circle"
										src="img/undraw_profile.svg">
									<a href="#" class="btn btn-primary btn-icon-split"> <span
									class="icon text-white-50"> <i class="fas fa-flag"></i>
								</span> <span class="text">준비</span>
								</a>
								</div>
								
							</div>
							<!-- buttons -->
							<a href="#" class="btn btn-primary btn-icon-split"> <span
									class="icon text-white-50"> <i class="fas fa-flag"></i>
								</span> <span class="text">시작하기!</span>
								</a> <a href="#" class="btn btn-info btn-icon-split"> <span
									class="icon text-white-50"> <i
										class="fas fa-info-circle"></i>
								</span> <span class="text">중간 배송지 확인</span>
						</a>
							
						</div>



					</div>
				</div>
			</div>


		</div>
		<!-- row -->


		<div class="row">
			<div class="col-xl-12">
				<div class="card-detail-chat shadow mb-4">
					<div class="card-body"></div>
				</div>
			</div>

		</div>


		<!-- 거래 정보 표시 -->
		<div class="detail_top">
			<div class="detail_top_top"></div>
			<div class="detail_top_content">
				<div class="detial_top_content_left"></div>
				<div class="detial_top_content_right"></div>
				<div class="detial_top_content_bottom"></div>
			</div>
		</div>
		<!-- 거래 정보 표시 end -->

		<div class="row">

			<!-- chating -->
			<div id="detail_bottom"></div>
			<!-- chating end-->

		</div>
		<!-- row -->
	</div>
	<!-- /.container-fluid -->
</th:block>
<th:block layout:fragment="script">
    <script th:inline="javascript">
      /*<![CDATA[*/
      function convertStringToDate(endDate) {
		    let dateComponents = endDate.split(' ');
		    let datePieces = dateComponents[0].split("-");
		    let timePieces = dateComponents[1].split(":");
		    return(new Date(datePieces[2], (datePieces[1] - 1), datePieces[0],
		                         timePieces[0], timePieces[1], timePieces[2]))
	  }
		
	  var endDate = convertStringToDate("22-07-03 17:50:00");
	  console.log(endDate);
      var stDate = new Date();
      console.log(stDate);
      var RemainDate = stDate - endDate;
      const timerId = document.querySelector('#timer');
      
      function msg_time() {
        var hours = Math.floor((RemainDate % (1000 * 60 * 60 * 24)) / (1000*60*60));
        var miniutes = Math.floor((RemainDate % (1000 * 60 * 60)) / (1000*60));
        var seconds = Math.floor((RemainDate % (1000 * 60)) / 1000);
        
        m = hours + ":" +  miniutes + ":" + seconds ; // 남은 시간 text형태로 변경
        
       timerId.innerHTML =m;
        
        if (RemainDate < 0) {      
          // 시간이 종료 되었으면..
          clearInterval(tid);   // 타이머 해제
        }else{
          RemainDate = RemainDate - 1000; // 남은시간 -1초
        }
      }
      
      setInterval(function() {
    	 msg_time();
    	 
    	}, 1000);
      
      
      /*]]>*/
    </script>
  </th:block>
</html>