<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorate="layouts/basic">
<th:block layout:fragment="content" th:object="${postDTO}">
    <div class="container-fluid">
        <!-- Page Heading -->
        <div class="d-sm-flex align-items-center justify-content-between mb-4">

        </div>
        <div class="card-header py-3 d-flex flex-row align-items-center justify-content-between">
            <h1 class="m-0 font-weight-bold text-gray-900" th:text="${postDTO.title}">거래명</h1>
            <div class="float-right">
                <a href="#" class="btn btn-secondary btn-icon-split"> </span>
                    <span class="text">수정</span>
                </a> <a href="#" class="btn btn-secondary btn-icon-split"> </span> <span
                    class="text">삭제</span>
            </a>
            </div>
        </div>
        <div class="row">

            <!-- 이미지와 링크 -->
            <div class="col-xl-4 col-lg-5">
                <div class="card-detail-top shadow mb-4">
                    <!-- Card Body -->
                    <div class="card-body">

                        <div class="represent_img">
                            <img class="img-item" src="img/휴ㅣㅈ.jpg">
                        </div>

                        <!-- 글 내용 -->
                        <div class="">
                            <div class="card-detail-top mb-4">
                                <!-- Card Body -->
                                <div class="card-body">
                                    <p>
                                        <h7 class="m-0 font-weight-bold text-gray-900">구매 동네</h7>
                                        ---
                                    </p>
                                    <p>
                                        <h7 class="m-0 font-weight-bold text-gray-900">원가</h7>
                                        <text th:text="${postDTO.getPrice()}"></text>
                                        원 &nbsp;<br>

                                        <h7 class="m-0 font-weight-bold text-gray-900">물품 개수</h7>
                                        15개입 &ensp;<br>
                                    </p>
                                    <p>
                                    <div class="margin-bottom">
                                        <h7 class="m-0 font-weight-bold text-gray-900">링크주소:
                                            <text
                                                    th:text="${postDTO.getLink()}"></text>
                                        </h7>
                                    </div>
                                    </p>

                                    <span class="text-gray-900">작성 날짜 </span> 30분 전


                                </div>

                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- 거래 정보 -->
            <div class="col-xl-8 col-lg-7">
                <div class="card-detail-top shadow mb-4">
                    <!-- Card Body -->
                    <div class="card-body-nonauto">

                        <div class="horizon">
                            <div class="detail-top_info">
                                <p>
                                    <h7 class="m-0 font-weight-bold text-primary bg-gray-100">
                                        최대 구매가
                                    </h7>
                                    <text th:text="${postDTO.getPrice()/postDTO.getMinpeople()}"></text>
                                    원&emsp;
                                    <h7 class="m-0 font-weight-bold text-primary bg-gray-100">
                                        최소 구매가
                                    </h7>
                                    <text th:text="${postDTO.getPrice()/postDTO.getMaxpeople()}"></text>
                                    <br>
                                </p>
                                <p>
                                    <h7 class="m-0 font-weight-bold text-primary bg-gray-100">최소인원</h7>
                                    <text th:text="${postDTO.getMinpeople()}"></text>
                                    명 &emsp;
                                    <h7 class="m-0 font-weight-bold text-primary bg-gray-100">최대인원
                                    </h7>
                                    <text th:text="${postDTO.getMaxpeople()}"></text>
                                    명
                                </p>
                                <p>

                                    <h7 class="m-0 font-weight-bold text-primary bg-gray-100">
                                        현재 인원수
                                    </h7>
                                    1명&emsp;
                                    <h7 class="m-0 font-weight-bold text-primary bg-gray-100">
                                        현재 구매가
                                    </h7>
                                    ---원<br>
                                </p>

                            </div>
                            <div class="detail-top_timer">
                                <h8>마감일:&emsp;
                                    <span th:text="${#temporals.format(postDTO.getEnddate(), 'yyyy-MM-dd')}"></span>
                                </h8>
                                <br><br>
                                <input type="hidden" id="enddate"
                                       th:value="${#temporals.format(postDTO.getEnddate(), 'yyyy-MM-dd HH:mm:ss')}">
                                <h9>남은 시간</h9>
                                <p><span id="timer" style="font-size: -webkit-xxx-large; color: red;"></span></p>
                            </div>
                        </div>
                        <div class="vertical">
                            <!-- 참여자 ready 영역 -->
                            <div class="detail-ready">
                                <div class="user-ready-img">
                                    <div
                                            class="text-gray-600 font-weight-bold bg-gray-100 align-center">user명
                                    </div>
                                    <img class="ready-img rounded-circle"
                                         src="img/undraw_profile.svg"> <a href="#"
                                                                          class="btn btn-primary-cap btn-icon-split"> <span
                                        class="icon text-white-50"> <i class="fas fa-flag"></i>
									</span> <span class="text">방장</span>
                                </a>
                                </div>
                                <div class="user-ready-img">
                                    <div
                                            class="text-gray-600 font-weight-bold bg-gray-100 align-center">user명
                                    </div>
                                    <img class="ready-img rounded-circle"
                                         src="img/undraw_profile.svg"> <a href="#"
                                                                          class="btn btn-primary btn-icon-split"> <span
                                        class="icon text-white-50"> <i class="fas fa-flag"></i>
									</span> <span class="text">준비</span>
                                </a>
                                </div>
                                <div class="user-ready-img">
                                    <div
                                            class="text-gray-600 font-weight-bold bg-gray-100 align-center">user명
                                    </div>
                                    <img class="ready-img rounded-circle"
                                         src="img/undraw_profile.svg"> <a href="#"
                                                                          class="btn btn-primary btn-icon-split"> <span
                                        class="icon text-white-50"> <i class="fas fa-flag"></i>
									</span> <span class="text">준비</span>
                                </a>
                                </div>
                                <div class="user-ready-img">
                                    <div
                                            class="text-gray-600 font-weight-bold bg-gray-100 align-center">user명
                                    </div>
                                    <img class="ready-img rounded-circle"
                                         src="img/undraw_profile.svg"> <a href="#"
                                                                          class="btn btn-primary btn-icon-split"> <span
                                        class="icon text-white-50"> <i class="fas fa-flag"></i>
									</span> <span class="text">준비</span>
                                </a>
                                </div>
                                <div class="user-ready-img">
                                    <div
                                            class="text-gray-600 font-weight-bold bg-gray-100 align-center">user명
                                    </div>
                                    <img class="ready-img rounded-circle"
                                         src="img/undraw_profile.svg"> <a href="#"
                                                                          class="btn btn-primary btn-icon-split"> <span
                                        class="icon text-white-50"> <i class="fas fa-flag"></i>
									</span> <span class="text">준비</span>
                                </a>
                                </div>

                            </div>
                            <!-- buttons -->
                            <a href="#" class="btn btn-primary btn-icon-split"> <span
                                    class="icon text-white-50"><i class="fas fa-flag"></i></span> <span
                                    class="text">시작하기!</span>
                            </a>

                            <button type="button" class="btn btn-info btn-icon-split"
                                    data-toggle="modal" data-target=".bd-example-modal-xl">
								<span class="icon text-white-50"> <i
                                        class="fas fa-info-circle"></i>
								</span> 중간 배송지 확인
                            </button>

                            <!--중간 배송지 모달창-->
                            <div class="modal fade bd-example-modal-xl" tabindex="-1"
                                 role="dialog" aria-labelledby="myExtraLargeModalLabel"
                                 aria-hidden="true">
                                <div class="modal-dialog modal-xl">
                                    <div class="modal-content">
                                        <div class="modal-header">
                                            <h5 class="modal-title">중간 배송지 확인하기</h5>
                                            <button type="button" class="close" data-dismiss="modal"
                                                    aria-label="닫기">
                                                <span aria-hidden="true">&times;</span>
                                            </button>
                                        </div>
                                        <div class="modal-body">
                                            <!--카카오맵 api 적용-->
                                            <!-- 지도를 표시할 div 입니다 -->
                                            <div id="map" style="width: 100%; height: 350px;"></div>

                                            <script type="text/javascript"
                                                    src="//dapi.kakao.com/v2/maps/sdk.js?appkey=a87e58c3986f19fb7967a5efe62a5c7c&libraries=services"></script>

                                            <script>

                                                /*
                                                점이 여러개 일 때
                                                */
                                                var latLngList = [[37.655804, 127.024276],
                                                    [35.226257, 129.164313], [37.838326, 128.813553]];

                                                //점이 3개라면 => 산술평균
                                                var sumLat = 0.0;
                                                var sumLng = 0.0;
                                                for (i in latLngList) {
                                                    sumLat += latLngList[i][0];
                                                    sumLng += latLngList[i][1];

                                                }
                                                var midLat = sumLat / latLngList.length;
                                                var midLng = sumLng / latLngList.length;

                                                //alert("midLat"+midLat);
                                                //alert("midLng"+midLng);
                                                var minLatLng = function (lat1, lng1, lat2, lng2) {
                                                    this.lat1 = lat1;
                                                    this.lng1 = lng1;
                                                    this.lat2 = lat2;
                                                    this.lng2 = lng2;
                                                    //this.minus = lat1 + ( (lat2-lat1)/2 );
                                                    this.midLat = this.lat1 + (this.lat2 - this.lat1) / 2;
                                                    this.midLng = this.lng1 + (this.lng2 - this.lng1) / 2;

                                                    var LatLng = function (lat, lng) {
                                                        this.lat = lat;
                                                        this.lng = lng;
                                                        this.getLat = function () {
                                                            return this.lat;
                                                        }
                                                    }

                                                }
                                            </script>

                                            <script>

                                                var mapContainer = document
                                                        .getElementById('map'), // 지도를 표시할 div
                                                    mapOption = {
                                                        center: new kakao.maps.LatLng(
                                                            midLat, midLng),

                                                        //center: new kakao.maps.LatLng(33.450701, 126.570667), // 지도의 중심좌표
                                                        level: 6
                                                        // 지도의 확대 레벨
                                                    };

                                                // 지도를 표시할 div와  지도 옵션으로  지도를 생성합니다
                                                var map = new kakao.maps.Map(mapContainer, mapOption);

                                                /*근처 편의점 찾기 start
                                                */

                                                // 마커를 클릭하면 장소명을 표출할 인포윈도우 입니다
                                                var infowindow = new kakao.maps.InfoWindow({zIndex: 1});

                                                // 장소 검색 객체를 생성합니다
                                                var ps = new kakao.maps.services.Places(map);

                                                // 카테고리로 은행을 검색합니다
                                                ps.categorySearch('CS2', placesSearchCB, {useMapCenter: true});

                                                // 키워드 검색 완료 시 호출되는 콜백함수 입니다
                                                function placesSearchCB(data, status, pagination) {
                                                    if (status === kakao.maps.services.Status.OK) {
                                                        for (var i = 0; i < data.length; i++) {
                                                            displayMarker(data[i]);
                                                            console.log(">>>편의점>>>" + data[i]);
                                                        }
                                                    }
                                                }

                                                // 지도에 마커를 표시하는 함수입니다
                                                function displayMarker(place) {
                                                    // 마커를 생성하고 지도에 표시합니다
                                                    var marker = new kakao.maps.Marker({
                                                        map: map,
                                                        position: new kakao.maps.LatLng(place.y, place.x)
                                                    });

                                                    // 마커에 클릭이벤트를 등록합니다
                                                    kakao.maps.event.addListener(marker, 'click', function () {
                                                        // 마커를 클릭하면 장소명이 인포윈도우에 표출됩니다
                                                        infowindow.setContent('<div style="padding:5px;font-size:12px;">' + place.place_name + '</div>');
                                                        infowindow.open(map, marker);
                                                    });
                                                }

                                                /*근처 편의점 찾기 end
                                                */


                                                // 주소-좌표 변환 객체를 생성합니다
                                                var geocoder = new kakao.maps.services.Geocoder();

                                                // 지도에 표시된 마커 객체를 가지고 있을 배열입니다
                                                var markers = [];
                                                var infowindows = [];

                                                var addList = ['서울특별시 도봉구 해등로', '부산시 해운대구 반송2동', '강원도 강릉시 사천면 석교리 755'];
                                                var nameList = ['jiwon1', 'jiwon2', 'jiwon3'];

                                                usersMarkers(addList, nameList);

                                                //users 마커 : 주소 -> 위경도
                                                function usersMarkers(addressList, nameList) {
                                                    //console.log("addressList"+addressList);
                                                    //let maps = [];
                                                    let position = [];
                                                    const geocoder = new kakao.maps.services.Geocoder();
                                                    const addressSearch = address => {
                                                        return new Promise((resolve, reject) => {
                                                            //console.log("address"+address);
                                                            geocoder.addressSearch(address, function (result, status) {
                                                                if (status === kakao.maps.services.Status.OK) {
                                                                    resolve({result});
                                                                } else {
                                                                    reject(status);
                                                                }
                                                            });
                                                        });
                                                    };

                                                    (async () => {
                                                        try {
                                                            for (const [i, addr] of addressList.entries()) {

                                                                const data = await addressSearch(addr);
                                                                coords = new kakao.maps.LatLng(data.result[0].y, data.result[0].x);

                                                                //getAddressByLatLng(coords);

                                                                //마커 생성
                                                                addMarker(coords, nameList[i]);

                                                                //주소 좌표와 생성한 지도 객체를 배열에 담아줍니다.
                                                                position.push(coords);
                                                                //maps.push(map);

                                                                //map.relayout();

                                                            }
                                                        } catch (e) {
                                                            console.error(e);
                                                        }
                                                    })();
                                                }//function usersMarkers

                                                /*
                                                중심으로 선정된 위도 경도로 => 도로명 주소
                                                */
                                                function getAddressByLatLng(coord) {

                                                    const coord2Address = coord => {
                                                        return new Promise((resolve, reject) => {
                                                            geocoder.coord2Address(coord.getLng(), coord.getLat(), function (result, status) {
                                                                if (status === kakao.maps.services.Status.OK) {
                                                                    resolve({result});
                                                                } else {
                                                                    reject(status);
                                                                }
                                                            });
                                                        });
                                                    };

                                                    (async () => {
                                                        try {
                                                            const data = await coord2Address(coord);

                                                            //주소정보로 maker생성
                                                            centerMarker(coord, data.result[0].address.address_name);

                                                        } catch (e) {
                                                            console.error(e);
                                                        }
                                                    })();

                                                }//getAddressByLatLng


                                                // 마커를 생성하고 지도위에 표시하는 함수입니다
                                                function addMarker(position, title) {

                                                    // 마커를 생성합니다
                                                    var marker = new kakao.maps.Marker(
                                                        {
                                                            position: position
                                                        });

                                                    console.log("포지션" + position);

                                                    // 인포윈도우로 장소에 대한 설명을 표시합니다

                                                    var infowindow = new kakao.maps.InfoWindow({
                                                        disableAutoPan: true,
                                                        position: coords,
                                                        content: '<div style="width:150px;text-align:center;padding:5px;font-size:12px;">' + title + '</div>'

                                                    });


                                                    infowindows.push(infowindow);
                                                    infowindow.open(map, marker);
                                                    //여기서 뭔가 center이동이 된 것.

                                                    // 마커가 지도 위에 표시되도록 설정합니다
                                                    marker.setMap(map);


                                                    //map.setCenter(markerposition);

                                                    // 생성된 마커를 배열에 추가합니다
                                                    markers.push(marker);

                                                }//addMarker

                                                function openInfowindow(map, infowindows) {
                                                    for (var i = 0; i < infowindows.length; i++) {
                                                        console.log(">>>infowindow" + infowindows[i]);
                                                        infowindows[i].open(map);
                                                        //infowindows[i].open(map, marker);

                                                    }
                                                }


                                                // 배열에 추가된 마커들을 지도에 표시하거나 삭제하는 함수입니다
                                                /*
                                                function setMarkers(map) {
                                                    for (var i = 0; i < markers.length; i++) {

                                                        markers[i].setMap(map);

                                                    }
                                                }
                                                */

                                                //중심마커를 생성하고 인포윈도우를 설정하는 함수입니다
                                                function centerMarker(markerPosition, text) {

                                                    console.log("centerMarker호출");
                                                    // 마커를 생성합니다
                                                    var marker = new kakao.maps.Marker(
                                                        {
                                                            position: markerPosition
                                                        });
                                                    var string = "https://map.kakao.com/link/to/" + text.replace(/ /g, "") + ',' + markerPosition.getLat() + ',' + markerPosition.getLng();
                                                    console.log(">>>>string>>>" + string);

                                                    //-------------------------
                                                    //커스텀 오버레이에 표시할 컨텐츠 입니다
                                                    // 커스텀 오버레이는 아래와 같이 사용자가 자유롭게 컨텐츠를 구성하고 이벤트를 제어할 수 있기 때문에
                                                    // 별도의 이벤트 메소드를 제공하지 않습니다
                                                    var content = '<div class="overlay-wrap">' +
                                                        '    <div class="overlay_info" style="margin-top: 1px; background-color: #fff;">' +
                                                        '        <div class="overlay-title">' +
                                                        '            <div class="overlay-close" onclick="closeOverlay()" title="닫기"></div>' +
                                                        '        </div>' +
                                                        '        <div class="overlay-body">' +

                                                        '            <div class="overlay-desc">' +
                                                        '                <div class="overlay-ellipsis">중간 위치 주소:' + text + '</div>' +

                                                        '                <div><a href="https://map.kakao.com/link/to/' + text.replace(/ /g, "") + ',' + markerPosition.getLat() + ',' + markerPosition.getLng() + '"' + '>카카오 길찾기</a></div>' +
                                                        '            </div>' +
                                                        '        </div>' +
                                                        '    </div>' +
                                                        '</div>';

                                                    // 마커 위에 커스텀오버레이를 표시합니다
                                                    // 마커를 중심으로 커스텀 오버레이를 표시하기위해 CSS를 이용해 위치를 설정했습니다

                                                    /*
                                                    var overlay = new kakao.maps.CustomOverlay({
                                                        content: content,
                                                        map: map,
                                                        position: marker.getPosition()
                                                    });

                                                    // 마커를 클릭했을 때 커스텀 오버레이를 표시합니다
                                                    kakao.maps.event.addListener(marker, 'click', function() {
                                                        overlay.setMap(map);
                                                        oneBind();
                                                    });

                                                    // 커스텀 오버레이를 닫기 위해 호출되는 함수입니다
                                                    function closeOverlay() {
                                                        overlay.setMap(null);
                                                        oneBind();
                                                    }
                                                    //-----------------------
                                                    */

                                                    marker.setTitle('산술평균 중간지점');

                                                    // 마커가 지도 위에 표시되도록 설정합니다
                                                    marker.setMap(map);

                                                    // 인포윈도우로 장소에 대한 설명을 표시합니다

                                                    var infowindow = new kakao.maps.InfoWindow(
                                                        {
                                                            disableAutoPan: true,
                                                            //content : '<div style="width:100px;height:20px;text-align:center;padding:6px 0;">'+text+'</div>'
                                                            content: content

                                                        });

                                                    infowindow.open(map, marker);

                                                    //마커가 지도 위에 표시되도록 설정합니다
                                                    //marker.setMap(map);
                                                }


                                                // 마커가 표시될 위치입니다
                                                var markerPosition = new kakao.maps.LatLng(
                                                    midLat, midLng);

                                                //중심 마커 생성 => getAddressByLatLng 호출
                                                getAddressByLatLng(markerPosition);


                                                // 지도를 표시하는 div 크기를 변경하는 함수입니다
                                                function resizeMap() {
                                                    var mapContainer = document
                                                        .getElementById('map');
                                                    mapContainer.style.width = '1050px';
                                                    mapContainer.style.height = '650px';
                                                }

                                                function relayout() {

                                                    // 지도를 표시하는 div 크기를 변경한 이후 지도가 정상적으로 표출되지 않을 수도 있습니다
                                                    // 크기를 변경한 이후에는 반드시  map.relayout 함수를 호출해야 합니다
                                                    // window의 resize 이벤트에 의한 크기변경은 map.relayout 함수가 자동으로 호출됩니다
                                                    map.relayout();
                                                }

                                                //console.log(">>>infowindows"+infowindows[0]);undefined
                                                //console.log(">>>markers"+markers[0]);
                                            </script>
                                        </div>
                                        <div class="modal-footer">
                                            <button type="button" class="btn btn-secondary"
                                                    data-dismiss="modal">닫기
                                            </button>
                                            <button type="button" class="btn btn-primary">카카오맵으로
                                                확인하기
                                            </button>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <!-- row -->

        <div class="row">
            <div class="col-xl-12">
                <div class="row d-flex justify-content-center">
                    <div class="col-md-12">
                        <div class="card shadow-0 border" style="background-color: #f0f2f5;">
                            <div class="text-center" style="padding-top: 10px;">
                                <h3 th:text="${postDTO.getTitle()} + ' 공동구매 채팅방 입니다.'"></h3>
                            </div>


                            <div class="card-body p-4" style="height: 500px; overflow: scroll; ">
                                <div class="card mb-4" th:each="comment: ${commentList}">
                                    <div class="card-body" th:if="${not #lists.isEmpty(commentList)}">
                                        <p th:text="${comment.comments}"></p>

                                        <div class="d-flex justify-content-between">
                                            <div class="d-flex flex-row align-items-center">
                                                <img src="img/undraw_profile.svg" alt="avatar" width="25"
                                                     height="25"/>
                                                <p class="small mb-0 ms-2" th:text="${comment.writer}"
                                                   style="padding-left: 3px;"></p> <!--th:text="${comment.writer}"-->
                                            </div>
                                            <div class="d-flex flex-row align-items-center">
                                                <p class="small text-muted mb-0"
                                                   th:text="${#temporals.format(comment.regDate, 'yyyy-MM-dd:HH:mm')}"></p>
                                                <!--th:text="${comment.regDate}"-->
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <form class="form-outline mb-4" style="padding-top: 20px;" th:action="@{/comments.do}"
                                  th:object="${comment}" method="post">
                                <input th:field="*{comments}" type="text" id="addANote" class="form-control"
                                       placeholder="Type comment..."/> <!--th:field="*{comments}"-->
                                <input type="hidden" th:name="pnum" th:value="${postDTO.getPnum()}"/>
                            </form>
                        </div>
                    </div>
                </div>


            </div>

        </div>


        <!-- 거래 정보 표시 -->
        <!--		<div class="detail_top">-->
        <!--			<div class="detail_top_top"></div>-->
        <!--			<div class="detail_top_content">-->
        <!--				<div class="detial_top_content_left"></div>-->
        <!--				<div class="detial_top_content_right"></div>-->
        <!--				<div class="detial_top_content_bottom"></div>-->
        <!--			</div>-->
        <!--		</div>-->
        <!-- 거래 정보 표시 end -->

        <!--		<div class="container my-auto">-->
        <!--			<div class="copyright text-center my-auto">-->
        <!--				<button class="btn btn-primary" id="button-save" type="button">저장하기</button>-->
        <!--				<button class="btn btn-primary" id="button-cancel" type="button">취소하기</button>-->
        <!--			</div>-->

        <!--		</div>-->
        <!-- row -->
    </div>
    <!-- /.container-fluid -->
</th:block>
<th:block layout:fragment="script">
    <script th:inline="javascript">
        /*<![CDATA[*/
        function convertStringToDate(endDate) {
            let dateComponents = endDate.split(' ');
            let datePieces = dateComponents[0].split("-");
            let timePieces = dateComponents[1].split(":");
            return (new Date(datePieces[0], (datePieces[1] - 1), datePieces[2],
                timePieces[0], timePieces[1], timePieces[2]))
        }

        //var endDate = $("#enddate").text();
        var endDate = convertStringToDate($("#enddate").val());
        console.log("endDate: ", endDate);

        var startDatetime = new Date();
        console.log("startDatetime: ", startDatetime);

        var RemainDate = endDate - startDatetime;
        console.log("RemainDate: ", RemainDate);
        const timerId = document.querySelector('#timer');

        function msg_time() {
            var days = Math.floor((RemainDate / (1000 * 60 * 60 * 24)));
            var hours = Math.floor((RemainDate % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
            var miniutes = Math.floor((RemainDate % (1000 * 60 * 60)) / (1000 * 60));
            var seconds = Math.floor((RemainDate % (1000 * 60)) / 1000);


            m = `${days}일 ${hours < 10 ? '0' : ''}${hours}:${miniutes < 10 ? '0' : ''}${miniutes}:${seconds < 10 ? '0' : ''}${seconds}`
            timerId.innerHTML = m;

            if (RemainDate < 0) {
                // 시간이 종료 되었으면..
                clearInterval(timer);   // 타이머 해제
            } else {
                RemainDate = RemainDate - 1000; // 남은시간 -1초
            }
        }

        var timer = setInterval(msg_time, 1000);
        /*]]>*/
    </script>
</th:block>
</html>